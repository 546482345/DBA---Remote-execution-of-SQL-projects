# DBA---Remote-execution-of-SQL-projects
假模假样也写个README

# 下班就跑远程执行sql工具

我暂时起不到什么比较高大上的名字。

#### 介绍

不在公司，如果有人需要执行sql，我又没带电脑怎么办？我要解决的就是这个问题，虽然我实际用不上

开发人员如果想执行什么sql语句，就通过这个软件提交，在系统中填入执行人、执行的sql，选择要操作的数据库和操作类型

然后这个软件会给我发送一封邮件，包含了，｛谁，哪个库，执行什么sql｝的详细内容。以及一个四位的随机验证码。

我可以在邮件里审核执行人所写的sql，如果sql没有问题，然后我把这四位随机验证码发回给开发，他自己填写验证码就可以执行成功了。

增删改会提示成功，查询操作会展示查询结果，现在支持导出了

代码有点乱，毕竟我不是专业的码农，格式上可能不太规范，反正能用就行

不要乱缩进！！！！！python是靠缩进来代替其他语言的花括号的，改了缩进很大可能会报错


#### 软件架构

我用到的是flask框架，需要下载相应的包

mailconfig文件是收发邮箱的设置文件，可以设置要接收邮件的邮箱地址

mailcode是发送短信的设置，使用的是网易邮箱的smtp

conf 文件是数据库的列表清单，可以根据手头的数据库逐一填写。

glo_config是自定义的全局变量管理模块，globals、glo2、glo3是自定义全局变量，每个文件都可以作为一个独立的全局变量，添加到glo_config里以后直接在文件里导入glo_config就可以使用了

在sqldmlcheckexec.py 文件中，这个函数负责在数据库执行sql的任务。 根据管理的数据库自行修改即可。

如果想支持多种不同的数据库，代码改动还是挺大的，需要在上面的conf 数据库清单文件中再加一个 类型标记 用以判断才可以。当然部分函数的参数也需要更改了。

现在可以支持mysql，postgresql。sqlserver最新的包好像更改了传参格式，一直不通。


#### 安装教程
本软件使用到包如下，从pip 上安装即可
flask    wtforms（我好像没有用到这里面的功能也可以不装吧）    configparser    psycopg2     pymysql     pymssql	tablib	tablib[ALL]

其余的如果启动报错缺少什么包，直接pip就好。
 
有一些垃圾代码我没有删除，也不影响，之前的注释我也保留着。。

听说大作家的手稿就是这样，涂涂改改的痕迹非常有价值。 

